/**
 * Symphony CSS Framework v2.0
 * Reset Layer - Modern CSS Reset with :where() for Low Specificity
 * 
 * Philosophy:
 * - Use :where() for zero specificity (easy to override)
 * - Modern CSS reset patterns (Josh Comeau + Andy Bell inspired)
 * - Logical properties for i18n support
 * - Accessibility-first defaults
 * 
 * Benefits of :where():
 * - Zero specificity means any author styles override reset
 * - No specificity wars
 * - Easier customization
 */

@layer symphony.reset {
  /* =============================================
     BOX SIZING
     Use border-box everywhere for predictable sizing
     ============================================= */

  :where(*, *::before, *::after) {
    box-sizing: border-box;
  }

  /* =============================================
     MARGIN RESET
     Remove default margins for more predictable layout
     ============================================= */

  :where(*) {
    margin: 0;
  }

  /* =============================================
     TYPOGRAPHY DEFAULTS
     Prevent font size inflation, better text rendering
     ============================================= */

  :where(html) {
    -webkit-text-size-adjust: none;
    -moz-text-size-adjust: none;
    text-size-adjust: none;

    /* Smooth scrolling for anchor links */
    scroll-behavior: smooth;

    /* Better font rendering */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;

    /* Hanging punctuation for proper typography */
    hanging-punctuation: first last;
  }

  /* Reduce motion if user prefers */
  @media (prefers-reduced-motion: reduce) {
    :where(html) {
      scroll-behavior: auto;
    }

    :where(*, *::before, *::after) {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* =============================================
     BODY DEFAULTS
     Full-height body, system font stack
     ============================================= */

  :where(body) {
    min-block-size: 100vh;
    min-block-size: 100dvh;
    /* Dynamic viewport for mobile */
    line-height: 1.5;

    /* System font stack fallback */
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
      'Helvetica Neue', Arial, sans-serif;
  }

  /* =============================================
     TYPOGRAPHY BALANCE
     Better line wrapping for headings
     ============================================= */

  :where(h1, h2, h3, h4, h5, h6) {
    text-wrap: balance;
    overflow-wrap: break-word;
    line-height: 1.2;
  }

  :where(p, li, figcaption) {
    text-wrap: pretty;
    overflow-wrap: break-word;
  }

  /* =============================================
     LINKS
     Sensible link defaults
     ============================================= */

  :where(a:not([class])) {
    text-decoration-skip-ink: auto;
    color: currentColor;
    text-underline-offset: 0.2em;
  }

  /* =============================================
     MEDIA ELEMENTS
     Responsive images and media
     ============================================= */

  :where(img, picture, video, canvas, svg) {
    display: block;
    max-inline-size: 100%;
    block-size: auto;
  }

  :where(img, picture, video) {
    max-inline-size: 100%;
    block-size: auto;
  }

  /* =============================================
     FORMS
     Inherit fonts, remove default styling
     ============================================= */

  :where(input, button, textarea, select) {
    font: inherit;
    color: inherit;
  }

  :where(button) {
    cursor: pointer;
    border: none;
    background: none;
  }

  :where(textarea:not([rows])) {
    min-block-size: 10em;
  }

  /* =============================================
     LISTS
     Remove list styles only when role="list" or [class]
     Preserves semantics for screen readers
     ============================================= */

  :where(ul, ol)[role="list"],
  :where(ul, ol)[class] {
    list-style: none;
    padding: 0;
  }

  /* =============================================
     TABLES
     Collapse borders by default
     ============================================= */

  :where(table) {
    border-collapse: collapse;
    border-spacing: 0;
  }

  /* =============================================
     FOCUS STYLES
     Visible focus for keyboard users
     ============================================= */

  :where(:focus-visible) {
    outline: 2px solid currentColor;
    outline-offset: 2px;
  }

  :where(:focus:not(:focus-visible)) {
    outline: none;
  }

  /* =============================================
     SCROLL ANCHORING
     Extra scroll margin for anchored elements
     ============================================= */

  :where(:target) {
    scroll-margin-block-start: 2rem;
  }

  /* =============================================
     DIALOG
     Remove default dialog styling
     ============================================= */

  :where(dialog) {
    padding: 0;
    border: none;
    background: transparent;
  }

  /* =============================================
     SUMMARY
     Style summary as interactive
     ============================================= */

  :where(summary) {
    cursor: pointer;
    list-style: none;
  }

  :where(summary::-webkit-details-marker) {
    display: none;
  }

  /* =============================================
     SELECTION
     Accessible text selection colors
     ============================================= */

  :where(::selection) {
    background-color: Highlight;
    color: HighlightText;
  }

  /* =============================================
     FIELDSET
     Reset fieldset styles
     ============================================= */

  :where(fieldset) {
    border: none;
    padding: 0;
    margin: 0;
  }

  /* =============================================
     LEGEND
     Reset legend to inline
     ============================================= */

  :where(legend) {
    padding: 0;
  }

  /* =============================================
     HR
     Sensible horizontal rule
     ============================================= */

  :where(hr) {
    border: none;
    border-block-start: 1px solid;
    color: inherit;
    block-size: 0;
    overflow: visible;
  }

  /* =============================================
     ABBR
     Style abbreviations consistently
     ============================================= */

  :where(abbr[title]) {
    text-decoration: underline dotted;
    cursor: help;
  }

  /* =============================================
     CODE
     Monospace for code elements
     ============================================= */

  :where(code, kbd, samp, pre) {
    font-family: ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo,
      Consolas, 'DejaVu Sans Mono', monospace;
    font-size: 1em;
    /* Prevent size reduction */
  }

  /* =============================================
     SUB/SUP
     Better positioning for sub/superscript
     ============================================= */

  :where(sub, sup) {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
  }

  :where(sub) {
    inset-block-end: -0.25em;
  }

  :where(sup) {
    inset-block-start: -0.5em;
  }

  /* =============================================
     PRINT STYLES
     Basic print optimization
     ============================================= */

  @media print {
    :where(*, *::before, *::after) {
      background: transparent !important;
      color: black !important;
      box-shadow: none !important;
      text-shadow: none !important;
    }

    :where(a, a:visited) {
      text-decoration: underline;
    }

    :where(pre, blockquote) {
      border: 1px solid #999;
      page-break-inside: avoid;
    }

    :where(img) {
      max-width: 100% !important;
      page-break-inside: avoid;
    }

    :where(p, h2, h3) {
      orphans: 3;
      widows: 3;
    }

    :where(h2, h3) {
      page-break-after: avoid;
    }
  }
}